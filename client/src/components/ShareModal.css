.share-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    /* Higher than Navbar (1000) */
    backdrop-filter: blur(8px);
    animation: fadeIn 0.2s ease-out;
}

.share-modal {
    background: var(--bg-glass);
    /* Works in both Light/Dark */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    width: 90%;
    max-width: 500px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    max-height: 85vh;
    animation: zoomIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    color: var(--text-primary);
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes zoomIn {
    from {
        transform: scale(0.95);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Header */
.share-header {
    padding: 16px 20px;
    display: flex;
    justify-content: center;
    /* Center Title */
    align-items: center;
    position: relative;
    border-bottom: 1px solid var(--border-color);
}

.share-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.5px;
}

.close-btn {
    position: absolute;
    left: 20px;
    /* Left aligned functionality like Image */
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    line-height: 1;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-btn:hover {
    color: var(--text-primary);
}

/* Search */
.share-search {
    padding: 16px 20px;
}

.share-search input {
    width: 100%;
    padding: 12px 44px 12px 16px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 0.95rem;
    outline: none;
    transition: all 0.2s;
    /* We can't use hardcoded SVG data URI with theme colors easily without mask or JS.
       Let's stick to simple padding or maybe remove the background icon if it conflicts with theme.
       Or better, just use the border and bg-secondary which matches the theme.
       I will remove the hardcoded SVG background image to allow clean theme integration. */
    padding-left: 16px;
}

.share-search input::placeholder {
    color: var(--text-secondary);
}

.share-search input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb), 0.1);
}

/* User Grid (Followers) */
.share-results {
    flex: 1;
    overflow-y: auto;
    padding: 0 20px 20px;
}

/* Grid Layout for Followers */
.share-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    justify-items: center;
}

.share-user-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    width: 100%;
    text-align: center;
}

.share-user-card .avatar-wrapper {
    position: relative;
    width: 60px;
    height: 60px;
    transition: transform 0.2s;
}

.share-user-card:hover .avatar-wrapper {
    transform: scale(1.05);
}

.share-user-card .user-avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid transparent;
}

.share-user-card.selected .user-avatar {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb), 0.3);
}

.share-user-card .user-name {
    font-size: 0.8rem;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
    max-width: 70px;
}

/* List Layout for Search Results (if searching) */
.share-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.share-list .share-user-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    border-radius: 12px;
    background-color: var(--bg-secondary);
}

.share-list .share-user-item:hover {
    background-color: var(--hover-color);
}

/* Footer Actions (Apps) */
.share-footer {
    padding: 20px;
    border-top: 1px solid var(--border-color);
    background-color: var(--bg-secondary);
}

.share-apps-row {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    overflow-x: auto;
    padding-bottom: 5px;
    /* Scrollbar space */
    scrollbar-width: thin;
    /* Firefox */
}

/* Hide scrollbar for clean look but allow scroll */
.share-apps-row::-webkit-scrollbar {
    height: 4px;
}

.share-apps-row::-webkit-scrollbar-track {
    background: transparent;
}

.share-apps-row::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

.share-app-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    background: none;
    border: none;
    cursor: pointer;
    min-width: 64px;
    color: var(--text-secondary);
    transition: transform 0.2s, color 0.2s;
}

.share-app-item:hover {
    transform: translateY(-2px);
    color: var(--text-primary);
}

.app-icon-circle {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background-color: var(--bg-primary);
    display: flex;
    justify-content: center;
    align-items: center;
    border: 1px solid var(--border-color);
    transition: background-color 0.2s;
}

.share-app-item:hover .app-icon-circle {
    background-color: var(--hover-color);
}

.app-icon-circle svg {
    width: 24px;
    height: 24px;
    stroke: var(--text-primary);
    stroke-width: 1.5;
}

.share-app-item span {
    font-size: 0.75rem;
    white-space: nowrap;
}

/* Mobile Bottom Sheet */
@media (max-width: 768px) {
    .share-modal-overlay {
        align-items: flex-end;
        /* Bottom alignment */
    }

    .share-modal {
        width: 100%;
        max-width: 100%;
        border-radius: 24px 24px 0 0;
        margin: 0;
        animation: slideUpMobile 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        max-height: 90vh;
        border-bottom: none;
    }

    .share-grid {
        grid-template-columns: repeat(4, 1fr);
        /* Keep 4 or maybe 3 on very small screens */
    }

    @keyframes slideUpMobile {
        from {
            transform: translateY(100%);
        }

        to {
            transform: translateY(0);
        }
    }
}

.no-results {
    text-align: center;
    padding: 30px;
    color: rgba(255, 255, 255, 0.5);
}